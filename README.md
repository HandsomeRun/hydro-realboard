# Realboard - HydroOJ 实时滚榜插件

这是一个为 [HydroOJ](https://hydro.js.org/) 系统设计的插件，旨在提供一个功能丰富、动画流畅的实时比赛排名展示板（滚榜）。它通过 WebSocket 接收实时的提交数据，并以动态、可视化的方式将其呈现给观众。

## ✨ 主要功能

- **双阶段提交流程**:
    - **A 阶段 (Pending)**: 新的提交会首先进入一个独立的"等待评测"区域，以橙黄色闪烁效果显示，此时不影响队伍的现有排名。
    - **B 阶段 (Final Verdict)**: 当评测结果返回后，对应的"等待评测"项会消失，同时最终结果会作为一个新的条目，从B区底部平滑滑入，并根据评测结果更新队伍的排名和得分。

- **分离的显示区域**:
    - **B 区 (主榜单)**: 位于上方，用于展示获得最终结果的提交。该区域可容纳最多9条记录，并带有微妙的奇偶行背景色区分，视觉上清晰明了。
    - **A 区 (等待区)**: 位于下方，同一时间只展示一个"等待评测"的提交，后续的提交会进入一个待处理队列，依次显示。

- **流畅的动画效果**:
    - 使用 `react-spring` 驱动所有动画，确保了流畅性和高性能。
    - 新的B阶段条目会从榜单底部滑入指定位置，而不会干扰或"推开"已经存在的条目。
    - A阶段到B阶段的切换自然、无缝。

- **完善的封榜逻辑 (Freeze)**:
    - 当比赛进入冻结时间后，所有新的提交虽然仍会显示，但其最终结果会被标记为 `FROZEN`。
    - 封榜后的提交**不会**影响队伍在公开榜单上的排名、得分和罚时，完美模拟真实比赛的封榜场景。

- **健壮的状态管理**:
    - 使用 React Hooks 和统一的状态管理逻辑，确保即使在短时间内收到大量并发提交时，系统也能独立、正确地处理每一个提交的状态和动画，避免了状态错乱或动画异常。
    - 能够正确处理重复提交已AC题目的情况（显示提交结果但不影响分数）。

- **技术栈**:
    - 前端框架: React
    - 语言: TypeScript
    - 动画库: `react-spring`
    - 实时通信: WebSocket

## 🚀 如何使用

1.  将该插件放置于 HydroOJ 的 `packages` 目录下。
2.  在 HydroOJ 的管理后台中启用该插件。
3.  在比赛或作业的"应用"设置中添加 `realboard` 即可访问该页面。

## ⚙️ 配置项

目前，大部分配置项都在前端代码中以常量的形式定义：

- `frontend/realboard.page.tsx`:
    - `MAX_QUEUE`: B 区榜单可以显示的最大条目数（当前为 9）。
    - `FADEOUT_TIME`: 条目在榜单上显示的最长时间（默认为 5000 毫秒）。

您可以根据需要直接修改这些常量来调整滚榜的行为。 